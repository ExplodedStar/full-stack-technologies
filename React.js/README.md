# React.js

- <a href="#1">Предисловие</a>
- <a href="#3">Введение. Что такое React.js?</a>

## Предисловие

Это руководство написано для лучшего понимания технологии React.js и принципов её использования.

Полезные ссылки:
- [React.js](https://reactjs.org/) - официальная сайт React.js на англ.
- [React.js Router](https://reacttraining.com/react-router/) - роутер для React.js.
- [Redux](https://redux.js.org/) - хранилище для React.js. 

## Введение

***React.js*** - это не очередной MVC-фреймворк или какой-то другой фреймворк. **Это просто библиотека для рендеринга ваших представлений**. Если вы пришли из мира MVC, то стоит понять, что React — это только «V», а «M» и «C» придётся поискать где-то ещё.

## Создание нового React приложения

Можно запустить дополнение для Chrome на простом http-server для Node.js.

Для создания скела приложения нужно ввести команду ниже

```bash
npx create-react-app react-app-name
cd react-app-name
npm start
```

В нем будет настроен Babel для транспиляции JSX в JS и Webpack для сборки приложения.

В этом окружении будут доступны скрипты для разработки в лайв режиме, тестированию и сборке.

## JSX

Для написания компонентов в React используется JSX.

Нельзя вернуть два элемента рядом, то есть должна быть какая-то обертка.

Решения:
- Вернуть массив элементов, но нужно будет расставить каждому ключ.
- Обернуть в (тег) общий родитель

Обязательно нужно закрывать теги в JSX или это приведёт к ошибке.

JSX это просто синтаксический сахар, это значит что мы можем писать JS внутри JSX.

JS нужно обернуть в фигурные скобки.

## Данные для компонентов

Мы можем передавать данные компонентам через props.

Можно использовать деструктуризацию.
 
## State (Состояние)

Чтобы писать Stateful компоненты нужно создавать классы в которых ессть состояние.

В полном компоненте обезательный метод рендер.

Состояние компонента это простой объект с набором свойств.

Есть несколько способов создания стате простым путем обновления state или getInitialState.

ИЗМЕНЯТЬ СОСТОЯНИЯ МОЖНО ТОЛЬКО ЧЕРЕЗ SETSTATE ИЛИ DOM ПРОСТО НАПРОСТО НЕ ОБНОВИТСЯ

1. Свойства и компоненты неизменны
2. Состояния и компоненты пренадлежат самому компоненту
3. Значения свойств не изменяются, а заменяются на новые с помощью setState

Для написания более сложных компонентов со стейтом нужно использовать Component из React

## Композиция

Соединение маленьких и больших частей воедино и создание более крупных частей.

Функцию обработчик нужно определять в свойствах.

В ребёнке `onClick = {props.onCount}`, в родителе `onCount = {this.handleClick}`. Идёт как бы связь `onClick = {props.onCount}` => `onCount = {this.handleClick}` если присмотреться это видно.

Можно спокойно обойти массив с помощью `map()`, опять же нужен key и id идеально подходит на его роль.

## Virtual DOM

Основная суть в том что React не будет перестраивать всё приложение и лишь ту часть компонента которая изменилась.

## Style

Чтобы писать инлайновые стили нужно в двойных скобках обисать стили как будто эьл объект.

## Жизненный цикл
1.
    1. Инициализация (конструктор). Можно инициализировать стартовое состояние.
    2. componentWillMount (например отправка запроса за статьей на сервер)
    3. render
    4. componentDidMount окончательная загрузка. Например мы можем получить размеры или позицыонирование
2. Обновление
    
    Либо у нас произошел setStait
    
    1. componentWillReseiveProps(nextProps) Важно: вызывается только в некоторых случаях остальные не зависимо
    2. shouldComponentSetState(nextProps, nextState) в ручном режиме нужно нам перестраивать компонент или нет
    3. componentWillUpdate(nextProps, nextState) предупреждаем что сейчас мы будем обновлять компонент
    4. render () Перестраивается виртуальное дерево
    5. componentDidUpdate(nextProps, prevState)

3. Смерть
    1. Единственный метод componentWillUnmount() Здесь можно провести отписки и т.д.

## Оптимизация shouldComponentUpdate

Например нам нужно просто открыть первую и закрыть последнюю.

Для этого не нужно всё перерисовывать, а просто изменить.

Он перестроит виртуальный ДОМ только для тех компонентов в которых произошли изменения.

ЧТОБЫ ИЗБЕЖАТЬ ОШИБОК НУЖНО СРАВНИВАТЬ ВСЕ PROPS И ВСЕ STATE.

Можно просто унаследовать компонент от PureComponent и всё будет работать также.

Но не стоит этим злоупотреблять.

## Дебаг

Console log логические по связке и подумать немного.

Никогда не работать с глобальными переменными локально, то есть лучше делать копии в компонент через переменную.

Имутабельные данные - нужно создавать копию.

Создайте локальную копию и меняйте уже её.

## XXX

Reverse data flow  вызов родителя из ребенка

State lifting поднятие стейта вверх

Это основа всех библиотек типа Redux и т.д.

